{"version":3,"sources":["Axis.js","Scatterplot.js","graph.js","index.js"],"names":["Axis","_ref","x","y","scale","_ref$type","type","gRef","useD3","anchor","axis","d3","concat","call","react_default","a","createElement","transform","ref","Scatterplot","width","height","data","xDomain","map","item","startDate","yDomain","cases","xScale","domain","range","nice","yScale","useMemo","d","cx","cy","r","src_Axis","RenderGraph","props","className","src_Scatterplot","BASE_URL","fetchcases","urls","current_end","current_start","i","url","push","getURLs","Promise","all","fetch","then","resp","json","App","_React$useState","React","useState","_React$useState2","Object","slicedToArray","index","_React$useState3","_React$useState4","loading","setLoading","_React$useState5","_React$useState6","setError","_React$useState7","_React$useState8","graphData","setgraphData","useEffect","assign","apply","toConsumableArray","judgeCases","values","forEach","case_item","majority","judge","dissents","other","res","justices","justice","id","name","Date","start_date","getFullYear","console","log","catch","e","warn","graph","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.aca0b18b.chunk.js","sourcesContent":["import React from \"react\";\nimport { useD3 } from \"d3blackbox\";\nimport * as d3 from \"d3\";\n\nconst Axis = ({ x, y, scale, type = \"Bottom\" }) => {\n  const gRef = useD3((anchor) => {\n    const axis = d3[`axis${type}`](scale);\n\n    d3.select(anchor).call(axis);\n  });\n\n  return <g transform={`translate(${x}, ${y})`} ref={gRef} />;\n};\n\nexport default Axis;\n","import React, { useMemo } from \"react\";\nimport * as d3 from \"d3\";\n\nimport Axis from \"./Axis\";\n\nconst Scatterplot = ({ x, y, width, height, data }) => {\n  let xDomain = !data ? [] : d3.extent(data.map((item) => item.startDate));\n  let yDomain = !data ? [] : d3.extent(data.map((item) => item.cases));\n  const xScale = d3.scaleLinear().domain(xDomain).range([0, width]).nice();\n  const yScale = useMemo(\n    () => d3.scaleLinear().domain(yDomain).range([height, 0]).nice(),\n    [yDomain, height]\n  );\n\n  if (!data) {\n    return \"\";\n  } else {\n    return (\n      <g transform={`translate(${x}, ${y})`}>\n        {data.map((d) => (\n          <circle cx={xScale(d.startDate)} cy={yScale(d.cases)} r={3} />\n        ))}\n\n        <Axis x={0} y={height} scale={xScale} />\n        <Axis x={0} y={0} scale={yScale} type={\"Left\"} />\n      </g>\n    );\n  }\n};\n\nexport default Scatterplot;\n","import React from \"react\";\n\nimport Scatterplot from \"./Scatterplot\";\n\nfunction RenderGraph(props) {\n  return (\n    <div className=\"App\">\n      <svg width=\"800\" height=\"800\">\n        <Scatterplot\n          x={100}\n          y={100}\n          width={400}\n          height={300}\n          data={props.data}\n        />\n      </svg>\n    </div>\n  );\n}\n\nexport default RenderGraph;\n","import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport RenderGraph from \"./graph.js\";\n\nimport \"./styles.css\";\n\nconst BASE_URL = \"https://frontend-exercise-api.herokuapp.com/cases/\";\n\nfunction fetchcases() {\n  const urls = getURLs();\n\n  return Promise.all(urls.map((url) => fetch(url).then((resp) => resp.json())));\n}\n\nfunction fetchJustices() {\n  return fetch(\n    `https://frontend-exercise-api.herokuapp.com/justices`\n  ).then((res) => res.json());\n}\n\nfunction getURLs() {\n  const start_date = 1791;\n  const end_date = 2019;\n  // const end_date = 1802;\n\n  let urls = [];\n  let current_start = start_date;\n  let current_end = current_start + 10;\n\n  for (let i = current_start; i <= end_date; i += 10) {\n    let url = `${BASE_URL}?before=${current_end}0101&after=${i}0101`;\n    current_end += 10;\n    urls.push(url);\n  }\n\n  return urls;\n}\n\nfunction App() {\n  const [index, setIndex] = React.useState(0);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(null);\n  const [graphData, setgraphData] = React.useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n\n    fetchcases()\n      .then((cases) => {\n        cases = Object.assign({}, ...cases);\n        let judgeCases = {};\n        Object.values(cases).forEach((case_item) => {\n          case_item.majority.forEach((judge) => {\n            judgeCases[judge]\n              ? (judgeCases[judge] += 1)\n              : (judgeCases[judge] = 1);\n          });\n          case_item.dissents.forEach((judge) => {\n            judgeCases[judge]\n              ? (judgeCases[judge] += 1)\n              : (judgeCases[judge] = 1);\n          });\n          case_item.other.forEach((judge) => {\n            judgeCases[judge]\n              ? (judgeCases[judge] += 1)\n              : (judgeCases[judge] = 1);\n          });\n        });\n\n        const graphData = [];\n\n        fetchJustices().then((justices) => {\n          justices.forEach((justice) => {\n            graphData.push({\n              id: justice.id,\n              name: justice.name,\n              startDate: new Date(justice.start_date).getFullYear(),\n              cases: judgeCases[justice.id] ? judgeCases[justice.id] : 0\n            });\n          });\n          setgraphData([...graphData]);\n        });\n\n        console.log(judgeCases);\n        setError(null);\n        setLoading(false);\n      })\n      .catch((e) => {\n        console.warn(e);\n        setError(\"error fetching data\");\n        setLoading(false);\n      });\n  }, [index]);\n\n  if (loading === true) {\n    return <p>loading</p>;\n  }\n\n  return (\n    <div className=\"App\">\n      {/* <div>{Object.keys(graphData)}</div> */}\n      <RenderGraph data={graphData} />\n    </div>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}